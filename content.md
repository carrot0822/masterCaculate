# 功能与相关逻辑说明

## 基础非业务功能
1. 登录
+ 使用vue router路由拦截器 与 axios拦截器来做的页面级别的权限控制
+ 接收的是菜单而非角色表 负责使用递归组件渲染出对应的菜单页面

2. 首页
+ 数字跳动使用的是count.js封装完成 组件位置位于 src/common/count下
+ echarts早期使用的是V-charts 但实际与e-charts使用并无区别 可直接替换为e-charts

## 系统管理模块
1. 用户管理与角色管理
+ 流程是先在角色管理内添加 角色 添加对应的权限之后 才可以在用户管理添加对应的用户 
+ 角色管理权限树使用的是Ztree
+ 用户管理则是自封装的上传预览组件 后期可替换为elementUI自带或者其他页面的上传裁剪插件
2. 登录记录：只有一个查询功能

3. 系统公告
+ 撤销：撤销不同于删除 撤销只是在用户层面的不可见 数据库中仍然存在 并且可以修改过后 取消撤销
+ 添加公告事宜的富文本编辑器是 vue-quill-editor 其实跟原版的quill-editor没有区别

4. 系统设置
+ 动态更换页面的图标和标题  数据存放在vuex内 便于页面视觉的同步渲染

5. 备份管理
+ 涉及到文件上传相关 更多的是后端那边的逻辑 前端部分只需要负责文件列表维护和文件的上传更新即可

6. 可视化推送
+ 这一块是同步于 dataSys项目 大数据项目的图书馆页面 包含公告视频图片的设置

7. 微信小程序
+ 微信小程序则是与微信小程序上的 轮播图 公告管理相关联
+ 需要注意微信小程序的跳转链接分内部链接与外部链接 外部链接首先需要过https验证 

8. 漂流柜管理
+ 负责漂流柜的广告轮播管理 
+ 后续模块添加的话也是这里添加 
+ 隐藏的还有公告管理与摄像头管理

## 财务管理
1. 充值管理
+ 负责记录 充值 退款 办卡所产生的费用记录
+ 充值功能：需要注意的是 当金额超过一定程度时需要输入管理密码 金额额度在 采编管理/数据字典/初始参数内更改 管理密码目前是admin的账号密码
+ 注销：注销之后 卡会消失  但是读者的信息会保留
+ 
2. 注销记录 逾期费用记录 字面意思

3. 订单记录与异常订单
+ 办卡机办卡产生的费用记录  异常订单是办卡机出错之后返回的一些记录


## 读者管理
1. 读者信息 读者卡信息 读者卡等级
+ 流程：
 先在读者卡等级设置对应等级 权限 金额 
 前往办卡界面输入各类读者信息 办卡 生成对应的读者信息 读者卡信息
 读者卡信息可用于登录读者端的opac系统
+ 读者卡界面可对读者卡进行对应的注销 补办 充值 挂失等操作

2. 失信管理
+ 流程
 读者借书超期未还---》读者逾期----》读者逾期超出时间----》失信
 逾期时间 失信时间可在 采编管理/数据字典/初始参数内更改

3. 荐购管理
+ 路程
 读者在OPAC系统/个人中心/荐购功能中输入 需要推荐购买的数据 
 管理员在列表中查看后经过审核后 可购买然后进入荐购历史记录内
 读者荐购---》管理审核---》进入荐购历史

 ## 流通管理

 1. 借阅管理
 + 书籍借阅 书籍续借 书籍报损都与RFID扫描 通过websocket通信  扫描的RFID后会传送回对应的编码 根据编码调用接口换算出对应的数据
 + 书籍归还只需要馆内码 就可以直接还书 不需要其他参数

 2. 流通记录
 + 借书记录 还书记录 逾期记录 逾期历史记录  字面意思 逾期流程在失信管理已提到

 + 报损记录 报损历史记录 
 书籍报损的条件  采编管理/数据字典/损坏设置内进行对应的修改

 3. 预约管理
 + 流程： 
    书籍被借走情况下：读者预约---》书籍被归还---》预约生效---》规定时间内借走书籍----》预约完成

## 资料管理
1. 书籍管理/期刊管理
+ 流程：书籍编目添加--->书籍典藏---绑定RFID/绑定位置信息--->书籍上架
+ 书籍编目添加选取数据 默认情况下是先本地查询后端服务器 在本地没有的情况下会前往付费马克数据库查询相关数据
+ 书籍典藏的选取数据 必须是编目里面已经录入的数据
2. 书籍清点：存放的典藏添加的所有书籍 因为同一本书可能有好几十本的情况产生 点击详情会列出同ISBN号书的所有信息

3. 图书位置信息：字面意思 上架与下架控制用户是 虚拟数据层面上 是否可以查询到和借走

4. 期刊流程同理
+ 过刊合订需要主要的是 过刊合订合并掉的期刊会在典藏中消失

## 数据字典
1. 初始参数 各种参数都在这里设置
+ 公告置顶条数： 控制公告管理可置顶的条数
+ 充值验证额度：字面意思
+ 补办费用设置： 补卡所需费用
+ 读者卡有效时间： 有些图书馆会定期更新读者卡
+ 办卡机默认等级： 决定办卡机办理所需的金钱 和办理出的读者卡等级
+ 逾期天数：逾期多少天后变失信
+ 逾期金额：逾期一天需要交付的金额
+ 催还间隔：未接入短信系统 接入后按照间隔发短信催还

2. 出版社：暂时没多大用处

3. 假期设置：考虑到有些图书馆会存在闭馆 如学校放假 此时被借走的书籍 归还日期将会增加对应的时间

4. 损坏设置：书籍报损里的金额赔偿和计算方式在此处添加

5. 馆藏地：涉及到多个图书馆同时控制的时候才会有使用余地

6. 区域管理：映射图书馆内各个楼层各个区的书籍信息数据